#!/usr/bin/env zsh

set -eu

DOTFILES_DIR=~/.dotfiles
source "${DOTFILES_DIR}/local/include/hook-helpers.zsh"

print -P '%F{blue} ðŸ”¨ Updating dotfiles and toolsðŸ”§  %F{reset}'
echo

hh_git 'Dotfiles' https://github.com/docwhat/dotfiles.git ~/.dotfiles

if [ -d ~/.dotfiles-personal ]; then
  hh_git 'Personal Dotfiles' 'none' ~/.dotfiles-personal
fi

rcup

if [ -d ~/.zgen ]; then
  echo
  print -P "%F{cyan}z %F{blue}updating plugins %F{reset}"
  set +eu
  source ~/.zgen/zgen.zsh
  set -eu
  zgen update |& offset | colorize yellow
fi

if [ -d ~/.tmux/plugins ]; then
  pushd ~/.tmux/plugins > /dev/null
  for tmux_plugin in *(N/); do
    hh_git "tmux plugin ${tmux_plugin}" 'none' ~/.tmux/plugins/"$tmux_plugin"
  done
  popd > /dev/null
fi

echo
print -P "%F{green}You may wish to consider running:%F{reset}"
echo "  * rbenv-update-plugins"
echo "  * update-gems"
echo "  * update-pip"
echo "  * update-npm"
echo "  * install-fonts"

# EOF
